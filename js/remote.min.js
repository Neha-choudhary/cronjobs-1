function refreshDiv(e){if(0==jQuery("#autorefresh").length||jQuery("#autorefresh").hasClass("active")){var t=[];if(jQuery(".rem-button, .display").each(function(){t.push(jQuery(jQuery(this)).attr("data-remotekey"))}),t.length>0){var n={callerID:VloRemote.MY_DEVICE_ID,messagetypeID:"MESS_TYPE_COMMAND",keys:t,commandID:VloRemote.COMMAND_GET_VALUE};callAjax(n,e)}}}function callAjax(e,t){void 0===t&&(t=!0),t&&(jQuery("#system-message-container").html(""),jQuery("#spinner").show());jQuery.ajax({dataType:"json",url:VloRemote.url,method:"post",data:e,timeout:1e4,success:function(e){processData(e),t&&jQuery("#spinner").hide()},error:function(e,n,a){showError(n+" "+a+"</br>"+e.responseText),t&&jQuery("#spinner").hide()}})}function callAjaxSync(e){jQuery("#system-message-container").html(""),jQuery("#spinner").show();jQuery.ajax({dataType:"json",url:VloRemote.url,method:"post",data:e,timeout:1e4,async:!1,success:function(e){processData(e),jQuery("#spinner").hide()},error:function(e,t,n){showError(t+" "+n+"</br>"+e.responseText),jQuery("#spinner").hide()}})}function showMessage(e){e.length>0&&jQuery("#system-message-container").html('<div class="alert alert-success"><a data-dismiss="alert" class="close" href="#">&times</a>'+e+"</div>")}function showError(e){e.length>0&&jQuery("#system-message-container").html('<div class="alert alert-error"><a data-dismiss="alert" class="close" href="#">&times</a>'+e+"</div>")}function processData(e){jQuery.each(e,function(e,t){"message"==e&&showMessage(t),"error"==e&&showError(t),jQuery("[data-remotekey="+t.remotekey+"]").each(function(e){jQuery(this).removeClass("link-warning"),jQuery(this).removeClass("link-down"),"undefined"!=typeof t.status&&(jQuery(this).removeClass("off"),jQuery(this).removeClass("on"),jQuery(this).removeClass("error"),jQuery(this).removeClass("undefined"),jQuery(this).removeClass("unknown"),jQuery(this).addClass(t.status)),"undefined"!=typeof t.text&&"undefined"!=typeof jQuery(this.getElementsByClassName("buttontext")[0])&&jQuery(this.getElementsByClassName("buttontext")[0]).html(t.text),"undefined"!=typeof t.groupselect&&jQuery(this).addClass("group-select"),"undefined"!=typeof t.link&&jQuery(this).addClass(t.link)})})}function resetSelection(){jQuery(".group-select").each(function(){jQuery(this).removeClass("group-select")})}function startTimer(){return timer=window.setInterval(function(){refreshDiv(!1)},5e3),timer}if(!window.scriptRemoteHasRun){window.scriptRemoteHasRun=!0;var VloRemote={COMMAND_GET_GROUP:282,COMMAND_SET_VALUE:145,COMMAND_GET_VALUE:136,COMMAND_TOGGLE:19,MY_DEVICE_ID:164,GROUP_NO_SELECTED:0,DIM_NO_SELECTED:19,url:"/cronjobs/70D455DC-ACB4-4525-8A85-E6009AE93AF4/process.php",timer:0},isMobile={Android:function(){return/Android/i.test(navigator.userAgent)},BlackBerry:function(){return/BlackBerry/i.test(navigator.userAgent)},iOS:function(){return/iPhone|iPad|iPod/i.test(navigator.userAgent)},Windows:function(){return/IEMobile/i.test(navigator.userAgent)},any:function(){return isMobile.Android()||isMobile.BlackBerry()||isMobile.iOS()||isMobile.Windows()}};jQuery(document).ready(function(){function e(e){console.log("Sending "+e);var t={callerID:VloRemote.MY_DEVICE_ID,messagetypeID:"MESS_TYPE_REMOTE_KEY",keys:e,mouse:"down"};callAjax(t,!1)}1==isMobile.Android()&&(console={_log:[],log:function(){for(var e=[],t=0;t<arguments.length;t++)e.push(arguments[t]);this._log.push(e.join(", "))},trace:function(){var e;try{throw new Error}catch(t){e=t.stack}console.log("console.trace()\n"+e.split("\n").slice(2).join("  \n"))},dir:function(e){console.log("Content of "+e);for(var t in e){var n="function"==typeof e[t]?"function":e[t];console.log(' -"'+t+'" -> "'+n+'"')}},show:function(){alert(this._log.join("\n")),this._log=[]}}),window.onerror=function(e,t,n){console.log('ERROR: "'+e+'" at "", line '+n)},window.addEventListener("touchstart",function(e){3===e.touches.length&&console.show()}),eventname=isMobile.any()?"touchstart":"mousedown",jQuery(".click-down").unbind(eventname),jQuery(".click-down").bind(eventname,function(e){e.preventDefault(),e.stopImmediatePropagation();var t=[];t.push(jQuery(this).attr("data-remotekey"));var n={callerID:VloRemote.MY_DEVICE_ID,messagetypeID:"MESS_TYPE_REMOTE_KEY",keys:t,mouse:"down"};callAjax(n,!1)}),eventname=isMobile.any()?"touchend":"mouseup",jQuery(".click-down").unbind(eventname),jQuery(".click-down").bind(eventname,function(e){e.preventDefault(),e.stopImmediatePropagation();var t=[];t.push(jQuery(this).attr("data-remotekey"));var n={callerID:VloRemote.MY_DEVICE_ID,messagetypeID:"MESS_TYPE_REMOTE_KEY",keys:t,mouse:"up"};callAjax(n,!1)}),eventname=isMobile.any()?"touchstart":"mousedown",jQuery(".repeat-click-down").unbind(eventname),jQuery(".repeat-click-down").bind(eventname,function(t){t.preventDefault(),t.stopPropagation();var n=[];n.push(jQuery(this).attr("data-remotekey"));var a=jQuery(this).attr("data-repeat-time");jQuery(this).addClass("sending"),VloRemote.repeattimer=setInterval(function(){e(n)},a),console.log(VloRemote.repeattimer+" time: "+a+"\n")}),eventname=isMobile.any()?"touchend":"mouseup",jQuery(".repeat-click-down").unbind(eventname),jQuery(".repeat-click-down").bind(eventname,function(e){e.preventDefault(),e.stopPropagation(),jQuery(this).removeClass("sending"),clearInterval(VloRemote.repeattimer)}),eventname=isMobile.any()?"touchend":"click",jQuery(".click-up").unbind(eventname),jQuery(".click-up").bind(eventname,function(e){e.preventDefault(),e.stopImmediatePropagation();var t=100;t=parseInt(jQuery(".tab-pane.active .dimmer").attr("data-myvalue")),(t==VloRemote.DIM_NO_SELECTED||isNaN(t))&&(t=null);var n=[];n.push(jQuery(this).attr("data-remotekey"));var a={callerID:VloRemote.MY_DEVICE_ID,messagetypeID:"MESS_TYPE_REMOTE_KEY",keys:n,commandvalue:t};resetSelection(),jQuery(this).addClass("group-select"),callAjax(a)}),eventname=isMobile.any()?"touchend":"click",jQuery(".btndropdown li a").unbind(eventname),jQuery(".btndropdown li a").bind(eventname,function(e){e.preventDefault();var t=this.parentNode.parentNode.parentNode;t.getElementsByClassName("buttontext")[0].textContent=this.text+" ";var n=jQuery(this).attr("data-value"),a=jQuery(this).text();jQuery(this.parentNode.parentNode).attr("data-myvalue",n);var o=[];if(o.push(jQuery(this.parentNode.parentNode).attr("data-remotekey")),"S"==n.charAt(0))var r={callerID:VloRemote.MY_DEVICE_ID,messagetypeID:"MESS_TYPE_SCHEME",keys:o,schemeID:n.substring(1),commandvalue:a};else if("C"==n.charAt(0))var r={callerID:VloRemote.MY_DEVICE_ID,messagetypeID:"MESS_TYPE_REMOTE_KEY",keys:o,commandID:n.substring(1)};else if("V"==n.charAt(0))var r={callerID:VloRemote.MY_DEVICE_ID,messagetypeID:"MESS_TYPE_REMOTE_KEY",keys:o,commandvalue:n.substring(1)};callAjax(r)}),eventname=isMobile.any()?"touchend":"click",jQuery("#group li a").unbind(eventname),jQuery("#group li a").bind(eventname,function(e){e.preventDefault();var t=this.parentNode.parentNode.parentNode,n=t.getElementsByClassName("buttontext")[0];n.textContent=this.text;var a=jQuery(this).attr("data-value");jQuery(this).text();if(jQuery(this.parentNode.parentNode).attr("data-myvalue",a),a==VloRemote.GROUP_NO_SELECTED)jQuery(t).removeClass("btn-info"),jQuery(t).addClass("btn-success"),resetSelection();else{jQuery(t).addClass("btn-info"),jQuery(t).removeClass("btn-success"),resetSelection();var o={callerID:VloRemote.MY_DEVICE_ID,messagetypeID:"MESS_TYPE_COMMAND",commandID:VloRemote.COMMAND_GET_GROUP,commandvalue:jQuery(this).attr("data-value").substring(1)};callAjax(o)}}),eventname=isMobile.any()?"touchend":"click",jQuery(".dimmer li a").unbind(eventname),jQuery(".dimmer li a").bind(eventname,function(e){e.preventDefault();var t=this.parentNode.parentNode.parentNode;t.getElementsByClassName("buttontext")[0].textContent=this.text+" ";var n=jQuery(this).attr("data-value"),a=jQuery(this).text();jQuery(this.parentNode.parentNode).attr("data-myvalue",n);var o=[];if(jQuery(".group-select").each(function(){o.push(jQuery(jQuery(this)).attr("data-remotekey"))}),o.length>0){if("S"==n.charAt(0))var r={callerID:VloRemote.MY_DEVICE_ID,messagetypeID:"MESS_TYPE_SCHEME",keys:o,schemeID:n.substring(1),commandvalue:a};else if("C"==n.charAt(0))var r={callerID:VloRemote.MY_DEVICE_ID,messagetypeID:"MESS_TYPE_REMOTE_KEY",keys:o,commandID:n.substring(1)};else if("V"==n.charAt(0))var r={callerID:VloRemote.MY_DEVICE_ID,messagetypeID:"MESS_TYPE_REMOTE_KEY",keys:o,commandID:VloRemote.COMMAND_SET_VALUE,commandvalue:parseInt(n.substring(1))};callAjax(r)}"19"==n?(jQuery(t).removeClass("btn-info"),jQuery(t).addClass("btn-warning")):0==o.length&&showMessage("Please select lights you want to dim or on/off together")}),jQuery(".controlselect-button").unbind("change"),jQuery(".controlselect-button").change(function(e){e.preventDefault(),e.stopImmediatePropagation();var t=jQuery(this.selectedOptions).attr("value"),n=jQuery(this.selectedOptions).text(),a=[];if(a.push(jQuery(this).attr("data-remotekey")),"S"==t.charAt(0))var o={callerID:VloRemote.MY_DEVICE_ID,messagetypeID:"MESS_TYPE_SCHEME",schemeID:t.substring(1),commandvalue:n};else if("C"==t.charAt(0))var o={callerID:VloRemote.MY_DEVICE_ID,messagetypeID:"MESS_TYPE_REMOTE_KEY",keys:a,commandID:t.substring(1)};else if("V"==t.charAt(0))var o={callerID:VloRemote.MY_DEVICE_ID,messagetypeID:"MESS_TYPE_REMOTE_KEY",keys:a,commandvalue:t.substring(1)};callAjax(o)}),eventname=isMobile.any()?"touchend":"click",jQuery(".jump-button").unbind(eventname),jQuery(".jump-button").bind(eventname,function(e){e.preventDefault(),e.stopImmediatePropagation();var t=jQuery(jQuery(this).prev(".controlselect-button")[0].selectedOptions).attr("value"),n=jQuery(jQuery(this).prev(".controlselect-button")[0].selectedOptions).text(),a=[];if(a.push(jQuery(this).attr("data-remotekey")),"S"==t.charAt(0))var o={callerID:VloRemote.MY_DEVICE_ID,messagetypeID:"MESS_TYPE_SCHEME",schemeID:t.substring(1),commandvalue:n};else if("C"==t.charAt(0))var o={callerID:VloRemote.MY_DEVICE_ID,messagetypeID:"MESS_TYPE_REMOTE_KEY",keys:a,commandID:t.substring(1)};else if("V"==t.charAt(0))var o={callerID:VloRemote.MY_DEVICE_ID,messagetypeID:"MESS_TYPE_REMOTE_KEY",keys:a,commandID:t.substring(1)};callAjax(o)}),jQuery(".scheme-button").unbind("click"),jQuery(".scheme-button").click(function(e){e.preventDefault(),e.stopImmediatePropagation();var t={callerID:VloRemote.MY_DEVICE_ID,messagetypeID:"MESS_TYPE_SCHEME",schemeID:jQuery(this).get("value")};callAjax(t)}),jQuery(".command-button").unbind("click"),jQuery(".command-button").click(function(e){e.preventDefault(),e.stopImmediatePropagation();var t={callerID:VloRemote.MY_DEVICE_ID,messagetypeID:"MESS_TYPE_COMMAND",commandID:jQuery(this).get("value")};callAjax(t)}),eventname=isMobile.any()?"touchend":"click",jQuery("#myTab a").unbind(eventname),jQuery("#myTab a").bind(eventname,function(e){jQuery("#system-message-container").html("")}),jQuery("#autorefresh").length>0&&(eventname=isMobile.any()?"touchend":"click",jQuery("#autorefresh").bind(eventname,function(e){jQuery(this).hasClass("active")?clearInterval(VloRemote.timer):VloRemote.timer=startTimer()})),function(){function e(e){var n="visible",a="hidden",o={focus:n,focusin:n,pageshow:n,blur:a,focusout:a,pagehide:a};e=e||window.event,e.type in o?document.body.className=o[e.type]:(document.body.className=this[t]?"hidden":"visible",this[t]?clearInterval(VloRemote.timer):(refreshDiv(!0),VloRemote.timer=startTimer()))}var t="hidden";t in document?document.addEventListener("visibilitychange",e):(t="mozHidden")in document?document.addEventListener("mozvisibilitychange",e):(t="webkitHidden")in document?document.addEventListener("webkitvisibilitychange",e):(t="msHidden")in document?document.addEventListener("msvisibilitychange",e):"onfocusin"in document?document.onfocusin=document.onfocusout=e:window.onpageshow=window.onpagehide=window.onfocus=window.onblur=e,void 0!==document[t]&&e({type:document[t]?"blur":"focus"})}(),VloRemote.timer=startTimer()})}